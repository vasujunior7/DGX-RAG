<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>HackRX API - Route Guide</title>
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: "Arial", sans-serif;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        min-height: 100vh;
        padding: 20px;
      }

      .container {
        max-width: 1200px;
        margin: 0 auto;
        background: white;
        border-radius: 15px;
        box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
        overflow: hidden;
      }

      .header {
        background: linear-gradient(45deg, #2c3e50, #3498db);
        color: white;
        padding: 40px;
        text-align: center;
      }

      .header h1 {
        font-size: 2.5em;
        margin-bottom: 10px;
        font-weight: 300;
      }

      .header p {
        font-size: 1.2em;
        opacity: 0.9;
      }

      .content {
        padding: 40px;
      }

      .section {
        margin-bottom: 40px;
      }

      .section h2 {
        color: #2c3e50;
        margin-bottom: 20px;
        font-size: 1.8em;
        border-bottom: 2px solid #3498db;
        padding-bottom: 10px;
      }

      .endpoint {
        background: #f8f9fa;
        border-left: 4px solid #3498db;
        padding: 20px;
        margin-bottom: 20px;
        border-radius: 0 8px 8px 0;
      }

      .endpoint h3 {
        color: #2c3e50;
        margin-bottom: 10px;
        font-size: 1.3em;
      }

      .method {
        display: inline-block;
        padding: 4px 12px;
        border-radius: 20px;
        font-size: 0.8em;
        font-weight: bold;
        margin-right: 10px;
        text-transform: uppercase;
      }

      .method.get {
        background: #28a745;
        color: white;
      }

      .method.post {
        background: #007bff;
        color: white;
      }

      .url {
        font-family: "Courier New", monospace;
        background: #e9ecef;
        padding: 8px 12px;
        border-radius: 4px;
        display: inline-block;
        margin: 8px 0;
      }

      .description {
        margin-top: 10px;
        color: #6c757d;
        line-height: 1.6;
      }

      .example {
        background: #f1f3f4;
        border-radius: 8px;
        padding: 15px;
        margin-top: 15px;
        font-family: "Courier New", monospace;
        font-size: 0.9em;
        overflow-x: auto;
      }

      .status {
        display: inline-block;
        padding: 4px 8px;
        border-radius: 12px;
        font-size: 0.8em;
        font-weight: bold;
        background: #28a745;
        color: white;
        margin-top: 10px;
      }

      .footer {
        background: #2c3e50;
        color: white;
        text-align: center;
        padding: 20px;
      }

      .btn {
        display: inline-block;
        background: #3498db;
        color: white;
        padding: 12px 24px;
        text-decoration: none;
        border-radius: 6px;
        margin: 10px;
        transition: background 0.3s;
      }

      .btn:hover {
        background: #2980b9;
      }

      .grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        gap: 20px;
        margin-top: 20px;
      }

      .card {
        background: white;
        border: 1px solid #dee2e6;
        border-radius: 8px;
        padding: 20px;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
      }

      .card h4 {
        color: #3498db;
        margin-bottom: 10px;
      }

      @keyframes spin {
        0% {
          transform: rotate(0deg);
        }
        100% {
          transform: rotate(360deg);
        }
      }

      .success {
        border-left: 4px solid #28a745 !important;
        background: #d4edda !important;
      }

      .error {
        border-left: 4px solid #dc3545 !important;
        background: #f8d7da !important;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <div class="header">
        <h1>üöÄ HackRX API</h1>
        <p>Complete API Route Guide & Documentation</p>
        <div style="margin-top: 20px">
          <span class="status">v1.0.0 - Active</span>
        </div>
      </div>

      <div class="content">
        <!-- API Overview -->
        <div class="section">
          <h2>üìã API Overview</h2>
          <p>
            Welcome to the HackRX API! This is a powerful FastAPI-based service
            that provides document processing and question-answering
            capabilities using advanced LLM integration.
          </p>

          <div class="grid">
            <div class="card">
              <h4>üîß Framework</h4>
              <p>
                Built with FastAPI for high performance and automatic
                documentation
              </p>
            </div>
            <div class="card">
              <h4>üìä Logging</h4>
              <p>Comprehensive request and application logging with rotation</p>
            </div>
            <div class="card">
              <h4>ü§ñ AI Integration</h4>
              <p>Powered by LLM models for intelligent document analysis</p>
            </div>
          </div>
        </div>

        <!-- Authentication -->
        <div class="section">
          <h2>üîê Authentication</h2>
          <p>
            The HackRX API uses Bearer token authentication for secure access to
            endpoints.
          </p>

          <div class="grid">
            <div class="card">
              <h4>üîë API Keys</h4>
              <p>
                Valid API keys are required for accessing protected endpoints.
                Include your API key in the Authorization header.
              </p>
            </div>
            <div class="card">
              <h4>üõ°Ô∏è Permissions</h4>
              <p>
                API keys have different permission levels: 'read' for data
                access and 'write' for data processing operations.
              </p>
            </div>
            <div class="card">
              <h4>‚öôÔ∏è Configuration</h4>
              <p>
                Authentication can be enabled/disabled via config.json. Check
                /api/v1/auth/status for current settings.
              </p>
            </div>
          </div>

          <h3 style="margin-top: 20px; color: #2c3e50">Available API Keys:</h3>
          <div class="example">
            Development Key: hackrx_2025_dev_key_123456789 (read, write)<br />
            Production Key: hackrx_2025_prod_key_987654321 (read, write)<br />
            Testing Key: hackrx_2025_test_key_555666777 (read only)
          </div>

          <h3 style="margin-top: 20px; color: #2c3e50">Usage Example:</h3>
          <div class="example">
            curl -X POST "http://localhost:8000/api/v1/hackrx/run" \<br />
            &nbsp;&nbsp;-H "Authorization: Bearer hackrx_2025_dev_key_123456789"
            \<br />
            &nbsp;&nbsp;-H "Content-Type: application/json" \<br />
            &nbsp;&nbsp;-d '{"documents": "https://example.com/doc.pdf",
            "questions": ["What is this about?"]}'
          </div>
        </div>

        <!-- Main Endpoints -->
        <div class="section">
          <h2>üõ£Ô∏è API Endpoints</h2>

          <!-- Root Endpoint -->
          <div class="endpoint">
            <h3>
              <span class="method get">GET</span>
              <span class="url">/</span>
            </h3>
            <div class="description">
              This page - API route guide and documentation
            </div>
          </div>

          <!-- Help Endpoint -->
          <div class="endpoint">
            <h3>
              <span class="method get">GET</span>
              <span class="url">/help</span>
            </h3>
            <div class="description">
              Basic API information and version details
            </div>
            <div class="example">
              { "message": "Welcome to HackRX API", "version": "1.0.0",
              "endpoints": { "api_v1": "/api/v1", "docs": "/docs", "redoc":
              "/redoc" } }
            </div>
          </div>

          <!-- V1 Root -->
          <div class="endpoint">
            <h3>
              <span class="method get">GET</span>
              <span class="url">/api/v1/</span>
            </h3>
            <div class="description">Version 1 API welcome message</div>
            <div class="example">
              { "message": "Welcome to HackRX API", "version": "v1" }
            </div>
          </div>

          <!-- Authentication Endpoints -->
          <div class="endpoint">
            <h3>
              <span class="method get">GET</span>
              <span class="url">/api/v1/auth/status</span>
            </h3>
            <div class="description">
              Check current authentication configuration status
            </div>
            <div class="example">
              { "authentication_enabled": true, "api_key_required": true,
              "total_active_keys": 3 }
            </div>
          </div>

          <div class="endpoint">
            <h3>
              <span class="method get">GET</span>
              <span class="url">/api/v1/auth/validate</span>
            </h3>
            <div class="description">
              Validate your API key and check permissions
              <br /><strong>Requires:</strong> Authorization: Bearer
              &lt;api_key&gt;
            </div>
            <div class="example">
              { "valid": true, "message": "API key is valid", "key_info": {
              "name": "Development Key", "permissions": ["read", "write"] } }
            </div>
          </div>

          <!-- Main HackRX Endpoint -->
          <div class="endpoint">
            <h3>
              <span class="method post">POST</span>
              <span class="url">/api/v1/hackrx/run</span>
            </h3>
            <div class="description">
              <strong
                >Main endpoint for document processing and question
                answering</strong
              ><br />
              Accepts a document URL and list of questions, returns AI-generated
              answers.<br />
              <strong>Requires:</strong> Authorization: Bearer
              &lt;api_key&gt;<br />
              <strong>Permissions:</strong> Write access required
            </div>

            <h4 style="margin-top: 15px; color: #2c3e50">Headers:</h4>
            <div class="example">
              Authorization: Bearer hackrx_2025_dev_key_123456789<br />
              Content-Type: application/json
            </div>

            <h4 style="margin-top: 15px; color: #2c3e50">Request Body:</h4>
            <div class="example">
              { "documents": "https://example.com/document.pdf", "questions": [
              "What is the main topic of this document?", "What are the key
              findings?", "Are there any recommendations?" ] }
            </div>

            <h4 style="margin-top: 15px; color: #2c3e50">Response:</h4>
            <div class="example">
              { "answers": [ "The main topic is...", "The key findings
              include...", "The recommendations are..." ] }
            </div>
          </div>
        </div>

        <!-- Documentation Links -->
        <div class="section">
          <h2>üìö Interactive Documentation</h2>
          <p>Explore and test the API using our interactive documentation:</p>

          <div style="text-align: center; margin-top: 20px">
            <a href="/docs" class="btn">üìñ Swagger UI Documentation</a>
            <a href="/redoc" class="btn">üìã ReDoc Documentation</a>
          </div>
        </div>

        <!-- Quick Start -->
        <div class="section">
          <h2>üöÄ Quick Start Example</h2>
          <p>Here's a quick example of how to use the main API endpoint:</p>

          <div class="example">
            # Using curl curl -X POST "http://localhost:8000/api/v1/hackrx/run"
            \ -H "Content-Type: application/json" \ -H "Authorization: Bearer
            your-token-here" \ -d '{ "documents":
            "https://your-document-url.pdf", "questions": [ "What is this
            document about?", "What are the main points?" ] }' # Using Python
            requests import requests response = requests.post(
            "http://localhost:8000/api/v1/hackrx/run", json={ "documents":
            "https://your-document-url.pdf", "questions": [ "What is this
            document about?", "What are the main points?" ] },
            headers={"Authorization": "Bearer your-token-here"} )
            print(response.json())
          </div>
        </div>

        <!-- API Testing -->
        <div class="section">
          <h2>üß™ API Testing</h2>
          <p>Test the API endpoints directly from this page:</p>

          <div class="endpoint">
            <h3>Test HackRX Run Endpoint</h3>
            <div style="margin-top: 15px">
              <label
                for="apiKey"
                style="display: block; margin-bottom: 5px; font-weight: bold"
                >API Key (Authorization Bearer Token):</label
              >
              <input
                type="text"
                id="apiKey"
                placeholder="hackrx_2025_dev_key_123456789"
                style="
                  width: 100%;
                  padding: 8px;
                  border: 1px solid #ddd;
                  border-radius: 4px;
                  margin-bottom: 10px;
                "
              />

              <label
                for="documents"
                style="display: block; margin-bottom: 5px; font-weight: bold"
                >Document URL:</label
              >
              <input
                type="text"
                id="documents"
                placeholder="https://example.com/document.pdf"
                style="
                  width: 100%;
                  padding: 8px;
                  border: 1px solid #ddd;
                  border-radius: 4px;
                  margin-bottom: 10px;
                "
              />

              <label
                for="questions"
                style="display: block; margin-bottom: 5px; font-weight: bold"
                >Questions (one per line):</label
              >
              <textarea
                id="questions"
                rows="4"
                placeholder="What is the main topic?&#10;What are the key findings?"
                style="
                  width: 100%;
                  padding: 8px;
                  border: 1px solid #ddd;
                  border-radius: 4px;
                  margin-bottom: 10px;
                "
              ></textarea>

              <button
                onclick="testAPI()"
                style="
                  background: #3498db;
                  color: white;
                  padding: 10px 20px;
                  border: none;
                  border-radius: 4px;
                  cursor: pointer;
                  margin-right: 10px;
                "
              >
                üöÄ Test API
              </button>
              <button
                onclick="clearResults()"
                style="
                  background: #95a5a6;
                  color: white;
                  padding: 10px 20px;
                  border: none;
                  border-radius: 4px;
                  cursor: pointer;
                  margin-right: 10px;
                "
              >
                üóëÔ∏è Clear
              </button>
              <button
                onclick="loadSampleData()"
                style="
                  background: #f39c12;
                  color: white;
                  padding: 10px 20px;
                  border: none;
                  border-radius: 4px;
                  cursor: pointer;
                "
              >
                üìã Load Sample
              </button>
            </div>

            <div id="testResults" style="margin-top: 20px; display: none">
              <h4 style="color: #2c3e50; margin-bottom: 10px">Test Results:</h4>
              <div
                id="resultContent"
                class="example"
                style="background: #f8f9fa; border: 1px solid #dee2e6"
              ></div>
            </div>

            <div
              id="loadingSpinner"
              style="display: none; text-align: center; margin-top: 20px"
            >
              <div
                style="
                  display: inline-block;
                  width: 20px;
                  height: 20px;
                  border: 3px solid #f3f3f3;
                  border-top: 3px solid #3498db;
                  border-radius: 50%;
                  animation: spin 1s linear infinite;
                "
              ></div>
              <p style="margin-top: 10px; color: #666">Testing API...</p>
            </div>
          </div>
        </div>

        <!-- Status & Monitoring -->
        <div class="section">
          <h2>üìä Status & Monitoring</h2>
          <div class="grid">
            <div class="card">
              <h4>üü¢ Server Status</h4>
              <p>API is running and healthy</p>
            </div>
            <div class="card">
              <h4>üìù Logging</h4>
              <p>All requests are logged in <code>/logs</code> directory</p>
            </div>
            <div class="card">
              <h4>üîÑ Auto-reload</h4>
              <p>Development mode with automatic reloading enabled</p>
            </div>
          </div>
        </div>
      </div>

      <div class="footer">
        <p>&copy; 2025 HackRX API | Built with FastAPI | Version 1.0.0</p>
        <p>
          üîó <a href="/docs" style="color: #3498db">API Documentation</a> | üîó
          <a href="/redoc" style="color: #3498db">Alternative Docs</a>
        </p>
      </div>
    </div>

    <script>
      // Add some interactivity
      document.addEventListener("DOMContentLoaded", function () {
        console.log("üöÄ HackRX API Documentation Loaded");

        // Add click handlers to method badges
        document.querySelectorAll(".method").forEach(function (method) {
          method.addEventListener("click", function () {
            this.style.transform = "scale(1.1)";
            setTimeout(() => {
              this.style.transform = "scale(1)";
            }, 200);
          });
        });
      });

      // API Testing Functions
      async function testAPI() {
        const apiKeyInput = document.getElementById("apiKey");
        const documentsInput = document.getElementById("documents");
        const questionsInput = document.getElementById("questions");
        const resultDiv = document.getElementById("testResults");
        const resultContent = document.getElementById("resultContent");
        const loadingSpinner = document.getElementById("loadingSpinner");

        // Validate inputs
        if (!documentsInput.value.trim()) {
          alert("Please enter a document URL");
          return;
        }

        if (!questionsInput.value.trim()) {
          alert("Please enter at least one question");
          return;
        }

        // Prepare data
        const questions = questionsInput.value
          .split("\n")
          .filter((q) => q.trim() !== "");
        const requestData = {
          documents: documentsInput.value.trim(),
          questions: questions,
        };

        // Prepare headers
        const headers = {
          "Content-Type": "application/json",
        };

        // Add API key if provided
        if (apiKeyInput.value.trim()) {
          headers["Authorization"] = `Bearer ${apiKeyInput.value.trim()}`;
        }

        // Show loading
        loadingSpinner.style.display = "block";
        resultDiv.style.display = "none";

        try {
          const response = await fetch("/api/v1/hackrx/run", {
            method: "POST",
            headers: headers,
            body: JSON.stringify(requestData),
          });

          const responseData = await response.json();

          // Hide loading
          loadingSpinner.style.display = "none";
          resultDiv.style.display = "block";

          if (response.ok) {
            resultContent.className = "example success";
            resultContent.innerHTML = `
              <strong>‚úÖ Success!</strong><br><br>
              <strong>Request:</strong><br>
              ${JSON.stringify(requestData, null, 2)}<br><br>
              <strong>Response:</strong><br>
              ${JSON.stringify(responseData, null, 2)}
            `;
          } else {
            resultContent.className = "example error";
            resultContent.innerHTML = `
              <strong>‚ùå Error ${response.status}</strong><br><br>
              <strong>Request:</strong><br>
              ${JSON.stringify(requestData, null, 2)}<br><br>
              <strong>Error Response:</strong><br>
              ${JSON.stringify(responseData, null, 2)}
            `;
          }
        } catch (error) {
          // Hide loading
          loadingSpinner.style.display = "none";
          resultDiv.style.display = "block";

          resultContent.className = "example error";
          resultContent.innerHTML = `
            <strong>‚ùå Network Error</strong><br><br>
            <strong>Request:</strong><br>
            ${JSON.stringify(requestData, null, 2)}<br><br>
            <strong>Error:</strong><br>
            ${error.message}<br><br>
            <em>Make sure the API server is running on localhost:8000</em>
          `;
        }
      }

      function clearResults() {
        document.getElementById("apiKey").value = "";
        document.getElementById("documents").value = "";
        document.getElementById("questions").value = "";
        document.getElementById("testResults").style.display = "none";
        document.getElementById("loadingSpinner").style.display = "none";
      }

      // Sample data function
      function loadSampleData() {
        document.getElementById("apiKey").value =
          "hackrx_2025_dev_key_123456789";
        document.getElementById("documents").value =
          "https://hackrx.blob.core.windows.net/assets/policy.pdf?sv=2023-01-03&st=2025-07-04T09%3A11%3A24Z&se=2027-07-05T09%3A11%3A00Z&sr=b&sp=r&sig=N4a9OU0w0QXO6AOIBiu4bpl7AXvEZogeT%2FjUHNO7HzQ%3D";
        document.getElementById("questions").value =
          "What is the grace period for premium payment under the National Parivar Mediclaim Plus Policy?\nWhat is the waiting period for pre-existing diseases (PED) to be covered?\nDoes this policy cover maternity expenses, and what are the conditions?";
      }
    </script>
  </body>
</html>
