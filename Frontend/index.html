<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="HackRX AI Chat - Intelligent Document Analysis Chatbot powered by RAG Technology" />
    <meta name="keywords" content="AI Chat, Document Analysis, RAG, Chatbot, Machine Learning, NLP" />
    <meta name="author" content="HackRX Team" />
    <meta name="theme-color" content="#0f172a" />
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ðŸ¤–</text></svg>">
    <title>HackRX AI Chat - Intelligent Document Analysis</title>
    <style>
      :root {
        /* Chatbot Dark Theme Colors */
        --bg-primary: #0f172a;
        --bg-secondary: #1e293b;
        --bg-tertiary: #334155;
        --bg-chat: #0f172a;
        --bg-message-user: linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%);
        --bg-message-bot: #1e293b;
        --bg-input: #334155;
        --bg-sidebar: #0f172a;
        
        /* Text Colors */
        --text-primary: #f8fafc;
        --text-secondary: #cbd5e1;
        --text-muted: #94a3b8;
        --text-accent: #60a5fa;
        --text-success: #10b981;
        --text-error: #ef4444;
        --text-warning: #f59e0b;
        
        /* Border Colors */
        --border-primary: #334155;
        --border-secondary: #475569;
        --border-accent: #3b82f6;
        
        /* Gradients */
        --gradient-primary: linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%);
        --gradient-secondary: linear-gradient(135deg, #06b6d4 0%, #0891b2 100%);
        --gradient-success: linear-gradient(135deg, #10b981 0%, #059669 100%);
        --gradient-warning: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);
        --gradient-danger: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);
        
        /* Spacing Scale */
        --space-1: 0.25rem;    /* 4px */
        --space-2: 0.5rem;     /* 8px */
        --space-3: 0.75rem;    /* 12px */
        --space-4: 1rem;       /* 16px */
        --space-5: 1.25rem;    /* 20px */
        --space-6: 1.5rem;     /* 24px */
        --space-8: 2rem;       /* 32px */
        --space-10: 2.5rem;    /* 40px */
        --space-12: 3rem;      /* 48px */
        --space-16: 4rem;      /* 64px */
        --space-20: 5rem;      /* 80px */
        --space-24: 6rem;      /* 96px */
        
        /* Border Radius */
        --radius-sm: 0.25rem;
        --radius-md: 0.375rem;
        --radius-lg: 0.5rem;
        --radius-xl: 0.75rem;
        --radius-2xl: 1rem;
        --radius-3xl: 1.5rem;
        --radius-full: 9999px;
        
        /* Shadows */
        --shadow-sm: 0 1px 2px 0 rgb(0 0 0 / 0.05);
        --shadow-md: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
        --shadow-lg: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);
        --shadow-xl: 0 20px 25px -5px rgb(0 0 0 / 0.1), 0 8px 10px -6px rgb(0 0 0 / 0.1);
        --shadow-2xl: 0 25px 50px -12px rgb(0 0 0 / 0.25);
        --shadow-glow: 0 0 20px rgba(59, 130, 246, 0.3);
        
        /* Transitions */
        --transition-fast: 150ms cubic-bezier(0.4, 0, 0.2, 1);
        --transition-normal: 300ms cubic-bezier(0.4, 0, 0.2, 1);
        --transition-slow: 500ms cubic-bezier(0.4, 0, 0.2, 1);
        
        /* Chat-specific Variables */
        --chat-width: 800px;
        --sidebar-width: 280px;
        --header-height: 80px;
        --input-height: 60px;
        --message-max-width: 70%;
        
        /* Animation Variables */
        --typing-duration: 2s;
        --bounce-duration: 0.6s;
        --slide-duration: 0.3s;
      }

      /* Reset and Base Styles */
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      *::before,
      *::after {
        box-sizing: border-box;
      }

      html {
        scroll-behavior: smooth;
        font-size: 16px;
        height: 100%;
      }

      body {
        font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
        background: var(--bg-primary);
        min-height: 100vh;
        color: var(--text-primary);
        line-height: 1.6;
        font-weight: 400;
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
        overflow-x: hidden;
        display: flex;
        flex-direction: column;
      }

      /* Animated Background Pattern */
      body::before {
        content: '';
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: 
          radial-gradient(circle at 20% 20%, rgba(59, 130, 246, 0.1) 0%, transparent 50%),
          radial-gradient(circle at 80% 80%, rgba(16, 185, 129, 0.1) 0%, transparent 50%),
          radial-gradient(circle at 40% 60%, rgba(139, 92, 246, 0.1) 0%, transparent 50%);
        animation: backgroundFloat 20s ease-in-out infinite;
        z-index: -1;
        pointer-events: none;
      }

      @keyframes backgroundFloat {
        0%, 100% {
          transform: translate(0, 0) scale(1);
          opacity: 0.1;
        }
        33% {
          transform: translate(-20px, -20px) scale(1.1);
          opacity: 0.15;
        }
        66% {
          transform: translate(20px, -10px) scale(0.9);
          opacity: 0.08;
        }
      }

      /* Chat Container Layout */
      .chat-container {
        display: flex;
        height: 100vh;
        width: 100%;
        background: rgba(15, 23, 42, 0.8);
        backdrop-filter: blur(20px);
      }

      /* Sidebar Styles */
      .sidebar {
        width: var(--sidebar-width);
        background: var(--bg-sidebar);
        border-right: 1px solid var(--border-primary);
        display: flex;
        flex-direction: column;
        position: relative;
        overflow: hidden;
      }

      .sidebar::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: linear-gradient(180deg, rgba(59, 130, 246, 0.05) 0%, transparent 100%);
        pointer-events: none;
      }

      /* Logo Section */
      .logo-section {
        padding: var(--space-6);
        border-bottom: 1px solid var(--border-primary);
        position: relative;
        z-index: 2;
      }

      .logo {
        display: flex;
        align-items: center;
        gap: var(--space-3);
        font-size: 1.5rem;
        font-weight: 700;
        color: var(--text-primary);
        text-decoration: none;
      }

      .logo-icon {
        font-size: 2rem;
        background: var(--gradient-primary);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
        animation: logoGlow 3s ease-in-out infinite alternate;
      }

      @keyframes logoGlow {
        from {
          filter: drop-shadow(0 0 10px rgba(59, 130, 246, 0.3));
        }
        to {
          filter: drop-shadow(0 0 20px rgba(59, 130, 246, 0.6));
        }
      }

      .logo-text {
        background: linear-gradient(135deg, var(--text-primary) 0%, var(--text-accent) 100%);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
      }

      /* Status Indicator */
      .status-section {
        padding: var(--space-4) var(--space-6);
        border-bottom: 1px solid var(--border-primary);
      }

      .status-indicator {
        display: flex;
        align-items: center;
        gap: var(--space-3);
        padding: var(--space-3) var(--space-4);
        background: rgba(30, 41, 59, 0.5);
        border: 1px solid var(--border-primary);
        border-radius: var(--radius-lg);
        font-size: 0.875rem;
        color: var(--text-secondary);
        transition: all var(--transition-normal);
      }

      .status-dot {
        width: 8px;
        height: 8px;
        border-radius: 50%;
        background: var(--text-error);
        position: relative;
        animation: statusPulse 2s ease-in-out infinite;
      }

      .status-dot.online {
        background: var(--text-success);
      }

      .status-dot.connecting {
        background: var(--text-warning);
      }

      .status-dot::after {
        content: '';
        position: absolute;
        top: -2px;
        left: -2px;
        width: 12px;
        height: 12px;
        border-radius: 50%;
        background: inherit;
        opacity: 0.3;
        animation: statusRipple 2s ease-in-out infinite;
      }

      @keyframes statusPulse {
        0%, 100% {
          opacity: 1;
          transform: scale(1);
        }
        50% {
          opacity: 0.7;
          transform: scale(1.2);
        }
      }

      @keyframes statusRipple {
        0% {
          transform: scale(0.8);
          opacity: 0.8;
        }
        100% {
          transform: scale(2);
          opacity: 0;
        }
      }

      /* Navigation Menu */
      .nav-menu {
        flex: 1;
        padding: var(--space-4) 0;
        overflow-y: auto;
      }

      .nav-item {
        display: flex;
        align-items: center;
        gap: var(--space-3);
        padding: var(--space-3) var(--space-6);
        color: var(--text-secondary);
        text-decoration: none;
        font-size: 0.9rem;
        font-weight: 500;
        transition: all var(--transition-normal);
        border-left: 3px solid transparent;
        position: relative;
      }

      .nav-item:hover {
        background: rgba(59, 130, 246, 0.1);
        color: var(--text-primary);
        border-left-color: var(--border-accent);
      }

      .nav-item.active {
        background: rgba(59, 130, 246, 0.15);
        color: var(--text-accent);
        border-left-color: var(--border-accent);
      }

      .nav-item i {
        width: 20px;
        text-align: center;
        opacity: 0.7;
      }

      .nav-item:hover i,
      .nav-item.active i {
        opacity: 1;
      }

      /* Main Chat Area */
      .main-chat {
        flex: 1;
        display: flex;
        flex-direction: column;
        background: var(--bg-chat);
        position: relative;
      }

      /* Chat Header */
      .chat-header {
        height: var(--header-height);
        padding: 0 var(--space-6);
        background: rgba(30, 41, 59, 0.8);
        backdrop-filter: blur(10px);
        border-bottom: 1px solid var(--border-primary);
        display: flex;
        align-items: center;
        justify-content: space-between;
        position: sticky;
        top: 0;
        z-index: 10;
      }

      .chat-title {
        display: flex;
        align-items: center;
        gap: var(--space-3);
      }

      .chat-title h1 {
        font-size: 1.25rem;
        font-weight: 600;
        color: var(--text-primary);
        margin: 0;
      }

      .chat-subtitle {
        font-size: 0.875rem;
        color: var(--text-muted);
        font-weight: 400;
      }

      .chat-actions {
        display: flex;
        align-items: center;
        gap: var(--space-3);
      }

      /* Action Buttons */
      .action-btn {
        display: flex;
        align-items: center;
        justify-content: center;
        width: 40px;
        height: 40px;
        background: transparent;
        border: 1px solid var(--border-primary);
        border-radius: var(--radius-lg);
        color: var(--text-secondary);
        cursor: pointer;
        transition: all var(--transition-normal);
        position: relative;
        overflow: hidden;
      }

      .action-btn::before {
        content: '';
        position: absolute;
        top: 0;
        left: -100%;
        width: 100%;
        height: 100%;
        background: linear-gradient(90deg, transparent, rgba(59, 130, 246, 0.2), transparent);
        transition: left var(--transition-slow);
      }

      .action-btn:hover {
        background: rgba(59, 130, 246, 0.1);
        border-color: var(--border-accent);
        color: var(--text-accent);
        transform: translateY(-1px);
      }

      .action-btn:hover::before {
        left: 100%;
      }

      .action-btn:active {
        transform: translateY(0);
      }

      /* Button Variants */
      .btn {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        gap: var(--space-2);
        padding: var(--space-4) var(--space-6);
        border: none;
        border-radius: var(--border-radius-xl);
        font-size: 1rem;
        font-weight: 500;
        text-decoration: none;
        cursor: pointer;
        transition: all var(--transition-normal);
        position: relative;
        overflow: hidden;
        user-select: none;
        white-space: nowrap;
      } 

      .btn::before {
        content: '';
        position: absolute;
        top: 0;
        left: -100%;
        width: 100%;
        height: 100%;
        background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
        transition: left var(--transition-slow);
      }

      .btn:hover::before {
        left: 100%;
      }

      .btn:active {
        transform: translateY(1px);
      }

      .btn:disabled {
        opacity: 0.6;
        cursor: not-allowed;
        transform: none;
      }

      .btn:disabled:hover::before {
        left: -100%;
      }

      /* Button Variants */
      .btn-primary {
        background: var(--gradient-primary);
        color: var(--text-primary);
        border: none;
        padding: var(--space-3) var(--space-6);
        border-radius: var(--radius-lg);
        font-weight: 600;
        font-size: 0.9rem;
        cursor: pointer;
        transition: all var(--transition-normal);
        position: relative;
        overflow: hidden;
      }

      .btn-primary::before {
        content: '';
        position: absolute;
        top: 0;
        left: -100%;
        width: 100%;
        height: 100%;
        background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
        transition: left var(--transition-slow);
      }

      .btn-primary:hover {
        transform: translateY(-2px);
        box-shadow: var(--shadow-glow);
      }

      .btn-primary:hover::before {
        left: 100%;
      }

      .btn-primary:disabled {
        opacity: 0.6;
        cursor: not-allowed;
        transform: none;
      }

      /* Button Variants */
      .btn-secondary {
        background: var(--danger-gradient);
        color: var(--white);
        box-shadow: var(--shadow-lg);
      }

      .btn-secondary:hover {
        transform: translateY(-2px);
        box-shadow: var(--shadow-xl);
      }

      .btn-success {
        background: var(--warning-gradient);
        color: var(--white);
        box-shadow: var(--shadow-lg);
      }

      .btn-success:hover {
        transform: translateY(-2px);
        box-shadow: var(--shadow-xl);
      }

      .btn-ghost {
        background: transparent;
        color: var(--white);
        border: 1px solid rgba(255, 255, 255, 0.3);
      }

      .btn-ghost:hover {
        background: rgba(255, 255, 255, 0.1);
        border-color: rgba(255, 255, 255, 0.5);
        transform: translateY(-2px);
      }

      /* Loading States */
      .loading-container {
        text-align: center;
        padding: var(--space-8);
        display: none;
        opacity: 0;
        transform: translateY(20px);
        transition: all var(--transition-normal);
      }

      .loading-container.show {
        display: block;
        opacity: 1;
        transform: translateY(0);
      }

      .loading-spinner {
        width: 60px;
        height: 60px;
        margin: 0 auto var(--space-4);
        position: relative;
      }

      .loading-spinner::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        border: 3px solid rgba(255, 255, 255, 0.2);
        border-top: 3px solid var(--white);
        border-radius: 50%;
        animation: spin 1s linear infinite;
      }

      .loading-spinner::after {
        content: '';
        position: absolute;
        top: 6px;
        left: 6px;
        width: calc(100% - 12px);
        height: calc(100% - 12px);
        border: 2px solid transparent;
        border-top: 2px solid rgba(255, 255, 255, 0.6);
        border-radius: 50%;
        animation: spin 1.5s linear infinite reverse;
      }

      @keyframes spin {
        0% {
          transform: rotate(0deg);
        }
        100% {
          transform: rotate(360deg);
        }
      }

      .loading-text {
        color: rgba(255, 255, 255, 0.9);
        font-size: 1.1rem;
        font-weight: 500;
        animation: loadingPulse 2s ease-in-out infinite;
      }

      @keyframes loadingPulse {
        0%, 100% {
          opacity: 0.7;
        }
        50% {
          opacity: 1;
        }
      }

      /* Questions Container */
      .questions-container {
        max-height: 400px;
        overflow-y: auto;
        padding: var(--space-2);
        border-radius: var(--border-radius-lg);
        background: rgba(255, 255, 255, 0.03);
        border: 1px solid rgba(255, 255, 255, 0.1);
      }

      .questions-container::-webkit-scrollbar {
        width: 6px;
      }

      .questions-container::-webkit-scrollbar-track {
        background: rgba(255, 255, 255, 0.1);
        border-radius: 3px;
      }

      .questions-container::-webkit-scrollbar-thumb {
        background: rgba(255, 255, 255, 0.3);
        border-radius: 3px;
      }

      .questions-container::-webkit-scrollbar-thumb:hover {
        background: rgba(255, 255, 255, 0.5);
      }

      .question-item {
        display: flex;
        align-items: center;
        gap: var(--space-3);
        margin-bottom: var(--space-4);
        padding: var(--space-3);
        background: rgba(255, 255, 255, 0.05);
        border-radius: var(--border-radius-lg);
        border: 1px solid rgba(255, 255, 255, 0.1);
        transition: all var(--transition-normal);
        animation: questionSlideIn 0.3s ease-out;
      }

      @keyframes questionSlideIn {
        from {
          opacity: 0;
          transform: translateX(-20px);
        }
        to {
          opacity: 1;
          transform: translateX(0);
        }
      }

      .question-item:hover {
        background: rgba(255, 255, 255, 0.08);
        border-color: rgba(255, 255, 255, 0.2);
        transform: translateY(-1px);
      }

      .question-item .form-input {
        flex: 1;
        margin: 0;
        background: transparent;
        border: none;
        padding: var(--space-2) var(--space-3);
      }

      .question-item .form-input:focus {
        background: rgba(255, 255, 255, 0.05);
      }

      .question-number {
        display: flex;
        align-items: center;
        justify-content: center;
        width: 32px;
        height: 32px;
        background: var(--success-gradient);
        border-radius: 50%;
        color: var(--white);
        font-weight: 600;
        font-size: 0.9rem;
        flex-shrink: 0;
      }

      .btn-remove {
        width: 36px;
        height: 36px;
        padding: 0;
        border-radius: 50%;
        background: var(--danger-gradient);
        flex-shrink: 0;
        font-size: 1.1rem;
      }

      /* Results Section */
      .results-container {
        margin-top: var(--space-12);
        display: none;
        opacity: 0;
        transform: translateY(30px);
        transition: all var(--transition-slow);
      }

      .results-container.show {
        display: block;
        opacity: 1;
        transform: translateY(0);
      }

      .results-header {
        display: flex;
        align-items: center;
        justify-content: space-between;
        margin-bottom: var(--space-6);
        padding: 0 var(--space-2);
      }

      .results-title {
        display: flex;
        align-items: center;
        gap: var(--space-3);
        font-size: 1.8rem;
        font-weight: 600;
        color: var(--white);
      }

      .results-actions {
        display: flex;
        gap: var(--space-3);
      }

      .answer-item {
        background: rgba(255, 255, 255, 0.05);
        border: 1px solid rgba(255, 255, 255, 0.1);
        border-left: 4px solid;
        border-left-color: var(--primary-400);
        border-radius: var(--border-radius-xl);
        padding: var(--space-6);
        margin-bottom: var(--space-6);
        transition: all var(--transition-normal);
        animation: answerSlideIn 0.5s ease-out;
      }

      @keyframes answerSlideIn {
        from {
          opacity: 0;
          transform: translateY(20px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      .answer-item:hover {
        background: rgba(255, 255, 255, 0.08);
        border-color: rgba(255, 255, 255, 0.2);
        transform: translateY(-2px);
        box-shadow: var(--shadow-lg);
      }

      .answer-question {
        font-size: 1.2rem;
        font-weight: 600;
        color: var(--white);
        margin-bottom: var(--space-4);
        display: flex;
        align-items: flex-start;
        gap: var(--space-3);
      }

      .answer-text {
        color: rgba(255, 255, 255, 0.9);
        line-height: 1.7;
        font-size: 1rem;
        padding-left: var(--space-8);
      }

      .answer-meta {
        display: flex;
        align-items: center;
        gap: var(--space-4);
        margin-top: var(--space-4);
        padding-top: var(--space-4);
        border-top: 1px solid rgba(255, 255, 255, 0.1);
        font-size: 0.9rem;
        color: rgba(255, 255, 255, 0.7);
      }

      /* Message System */
      .message {
        padding: var(--space-4) var(--space-6);
        border-radius: var(--border-radius-xl);
        margin-bottom: var(--space-4);
        display: none;
        opacity: 0;
        transform: translateY(-20px);
        transition: all var(--transition-normal);
        position: relative;
        overflow: hidden;
      }

      .message.show {
        display: block;
        opacity: 1;
        transform: translateY(0);
      }

      .message::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        width: 4px;
        height: 100%;
        background: currentColor;
      }

      .message-success {
        background: rgba(16, 185, 129, 0.2);
        border: 1px solid rgba(16, 185, 129, 0.3);
        color: #10b981;
      }

      .message-error {
        background: rgba(239, 68, 68, 0.2);
        border: 1px solid rgba(239, 68, 68, 0.3);
        color: #ef4444;
      }

      .message-warning {
        background: rgba(245, 158, 11, 0.2);
        border: 1px solid rgba(245, 158, 11, 0.3);
        color: #f59e0b;
      }

      .message-info {
        background: rgba(59, 130, 246, 0.2);
        border: 1px solid rgba(59, 130, 246, 0.3);
        color: #3b82f6;
      }

      /* Footer */
      .footer {
        margin-top: var(--space-16);
        padding: var(--space-8);
        text-align: center;
        background: var(--glass-bg);
        backdrop-filter: var(--glass-backdrop);
        border: 1px solid var(--glass-border);
        border-radius: var(--border-radius-3xl);
        color: rgba(255, 255, 255, 0.8);
      }

      .footer-content {
        max-width: 800px;
        margin: 0 auto;
      }

      .footer-links {
        display: flex;
        justify-content: center;
        align-items: center;
        gap: var(--space-6);
        margin-top: var(--space-4);
        flex-wrap: wrap;
      }

      .footer-link {
        color: rgba(255, 255, 255, 0.9);
        text-decoration: none;
        padding: var(--space-2) var(--space-4);
        border-radius: var(--border-radius-lg);
        transition: all var(--transition-normal);
        display: flex;
        align-items: center;
        gap: var(--space-2);
      }

      .footer-link:hover {
        background: rgba(255, 255, 255, 0.1);
        color: var(--white);
        transform: translateY(-1px);
      }

      /* Responsive Design */
      @media (max-width: 1024px) {
        .container {
          padding: 0 var(--space-4);
        }
        
        .main-layout {
          gap: var(--space-6);
        }
      }

      @media (max-width: 768px) {
        .main-layout {
          grid-template-columns: 1fr;
          gap: var(--space-6);
        }

        .header {
          padding: var(--space-12) 0 var(--space-8);
        }

        .header-content {
          padding: var(--space-8) var(--space-4);
        }

        .logo {
          font-size: 2.5rem;
        }

        .logo-icon {
          font-size: 3rem;
        }

        .header-subtitle {
          font-size: 1.2rem;
        }

        .header-description {
          font-size: 1rem;
        }

        .card-header {
          padding: var(--space-6) var(--space-6) var(--space-4);
        }

        .card-body {
          padding: var(--space-6);
        }

        .card-title {
          font-size: 1.3rem;
        }

        .results-header {
          flex-direction: column;
          align-items: stretch;
          gap: var(--space-4);
        }

        .results-actions {
          justify-content: center;
        }

        .footer-links {
          flex-direction: column;
          gap: var(--space-3);
        }
      }

      @media (max-width: 480px) {
        .container {
          padding: 0 var(--space-3);
        }

        .header {
          padding: var(--space-8) 0 var(--space-6);
        }

        .logo {
          font-size: 2rem;
          flex-direction: column;
          gap: var(--space-2);
        }

        .logo-icon {
          font-size: 2.5rem;
        }

        .btn {
          padding: var(--space-3) var(--space-4);
          font-size: 0.9rem;
        }

        .question-item {
          flex-direction: column;
          align-items: stretch;
          gap: var(--space-2);
        }

        .question-number {
          align-self: flex-start;
        }

        .answer-question {
          font-size: 1.1rem;
        }

        .answer-text {
          padding-left: 0;
        }
      }

      /* Accessibility */
      @media (prefers-reduced-motion: reduce) {
        *,
        *::before,
        *::after {
          animation-duration: 0.01ms !important;
          animation-iteration-count: 1 !important;
          transition-duration: 0.01ms !important;
        }
      }

      /* Dark mode support */
      @media (prefers-color-scheme: dark) {
        :root {
          --glass-bg: rgba(255, 255, 255, 0.05);
          --glass-border: rgba(255, 255, 255, 0.1);
        }
      }

      /* High contrast mode */
      @media (prefers-contrast: high) {
        .glass-card {
          border-width: 2px;
        }
        
        .form-input {
          border-width: 2px;
        }
        
        .btn {
          border: 2px solid transparent;
        }
      }

      /* Chat Messages Area */
      .chat-messages {
        flex: 1;
        padding: var(--space-6);
        overflow-y: auto;
        scroll-behavior: smooth;
        display: flex;
        flex-direction: column;
        gap: var(--space-4);
        position: relative;
      }

      .chat-messages::-webkit-scrollbar {
        width: 6px;
      }

      .chat-messages::-webkit-scrollbar-track {
        background: transparent;
      }

      .chat-messages::-webkit-scrollbar-thumb {
        background: var(--border-primary);
        border-radius: var(--radius-full);
      }

      .chat-messages::-webkit-scrollbar-thumb:hover {
        background: var(--border-secondary);
      }

      /* Welcome Message */
      .welcome-message {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        text-align: center;
        padding: var(--space-16) var(--space-8);
        opacity: 0.8;
      }

      .welcome-icon {
        font-size: 4rem;
        background: var(--gradient-primary);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
        margin-bottom: var(--space-6);
        animation: welcomePulse 3s ease-in-out infinite;
      }

      @keyframes welcomePulse {
        0%, 100% {
          transform: scale(1);
          filter: drop-shadow(0 0 20px rgba(59, 130, 246, 0.3));
        }
        50% {
          transform: scale(1.05);
          filter: drop-shadow(0 0 30px rgba(59, 130, 246, 0.5));
        }
      }

      .welcome-title {
        font-size: 2rem;
        font-weight: 700;
        color: var(--text-primary);
        margin-bottom: var(--space-4);
      }

      .welcome-subtitle {
        font-size: 1.1rem;
        color: var(--text-secondary);
        margin-bottom: var(--space-8);
        line-height: 1.6;
        max-width: 500px;
      }

      .welcome-features {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: var(--space-4);
        width: 100%;
        max-width: 600px;
      }

      .welcome-feature {
        padding: var(--space-4);
        background: rgba(30, 41, 59, 0.3);
        border: 1px solid var(--border-primary);
        border-radius: var(--radius-xl);
        transition: all var(--transition-normal);
      }

      .welcome-feature:hover {
        background: rgba(30, 41, 59, 0.5);
        border-color: var(--border-accent);
        transform: translateY(-2px);
      }

      .welcome-feature-icon {
        font-size: 1.5rem;
        color: var(--text-accent);
        margin-bottom: var(--space-2);
      }

      .welcome-feature-title {
        font-size: 1rem;
        font-weight: 600;
        color: var(--text-primary);
        margin-bottom: var(--space-1);
      }

      .welcome-feature-desc {
        font-size: 0.875rem;
        color: var(--text-muted);
        line-height: 1.4;
      }

      /* Message Bubbles */
      .message-group {
        display: flex;
        flex-direction: column;
        gap: var(--space-2);
        animation: messageSlideIn 0.4s ease-out;
      }

      @keyframes messageSlideIn {
        from {
          opacity: 0;
          transform: translateY(20px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      .message-bubble {
        max-width: var(--message-max-width);
        padding: var(--space-4) var(--space-5);
        border-radius: var(--radius-2xl);
        position: relative;
        word-wrap: break-word;
        line-height: 1.5;
        font-size: 0.95rem;
      }

      /* User Messages */
      .message-user {
        align-self: flex-end;
        background: var(--bg-message-user);
        color: var(--text-primary);
        border-bottom-right-radius: var(--radius-md);
        box-shadow: var(--shadow-lg);
      }

      .message-user::before {
        content: '';
        position: absolute;
        bottom: 0;
        right: -8px;
        width: 0;
        height: 0;
        border-left: 8px solid #1d4ed8;
        border-bottom: 8px solid transparent;
      }

      /* Bot Messages */
      .message-bot {
        align-self: flex-start;
        background: var(--bg-message-bot);
        color: var(--text-primary);
        border: 1px solid var(--border-primary);
        border-bottom-left-radius: var(--radius-md);
        box-shadow: var(--shadow-md);
      }

      .message-bot::before {
        content: '';
        position: absolute;
        bottom: 0;
        left: -8px;
        width: 0;
        height: 0;
        border-right: 8px solid var(--bg-message-bot);
        border-bottom: 8px solid transparent;
      }

      /* Message Meta */
      .message-meta {
        display: flex;
        align-items: center;
        gap: var(--space-2);
        margin-top: var(--space-2);
        font-size: 0.75rem;
        color: var(--text-muted);
      }

      .message-user .message-meta {
        justify-content: flex-end;
      }

      .message-bot .message-meta {
        justify-content: flex-start;
      }

      .message-time {
        opacity: 0.7;
      }

      .message-status {
        display: flex;
        align-items: center;
        gap: var(--space-1);
      }

      /* Typing Indicator */
      .typing-indicator {
        display: flex;
        align-items: center;
        gap: var(--space-3);
        padding: var(--space-4) var(--space-5);
        background: var(--bg-message-bot);
        border: 1px solid var(--border-primary);
        border-radius: var(--radius-2xl);
        border-bottom-left-radius: var(--radius-md);
        max-width: 120px;
        align-self: flex-start;
        position: relative;
      }

      .typing-indicator::before {
        content: '';
        position: absolute;
        bottom: 0;
        left: -8px;
        width: 0;
        height: 0;
        border-right: 8px solid var(--bg-message-bot);
        border-bottom: 8px solid transparent;
      }

      .typing-dots {
        display: flex;
        gap: var(--space-1);
      }

      .typing-dot {
        width: 6px;
        height: 6px;
        background: var(--text-accent);
        border-radius: 50%;
        animation: typingBounce 1.4s ease-in-out infinite;
      }

      .typing-dot:nth-child(2) {
        animation-delay: 0.2s;
      }

      .typing-dot:nth-child(3) {
        animation-delay: 0.4s;
      }

      @keyframes typingBounce {
        0%, 60%, 100% {
          transform: translateY(0);
          opacity: 0.4;
        }
        30% {
          transform: translateY(-10px);
          opacity: 1;
        }
      }

      .typing-text {
        font-size: 0.875rem;
        color: var(--text-secondary);
        font-style: italic;
      }

      /* Chat Input Area */
      .chat-input-container {
        padding: var(--space-6);
        background: rgba(30, 41, 59, 0.8);
        backdrop-filter: blur(10px);
        border-top: 1px solid var(--border-primary);
        position: sticky;
        bottom: 0;
      }

      .chat-input-form {
        display: flex;
        gap: var(--space-3);
        align-items: flex-end;
        max-width: 100%;
      }

      .input-group {
        flex: 1;
        position: relative;
      }

      .chat-input {
        width: 100%;
        min-height: var(--input-height);
        max-height: 120px;
        padding: var(--space-4) var(--space-5);
        padding-right: var(--space-12);
        background: var(--bg-input);
        border: 1px solid var(--border-primary);
        border-radius: var(--radius-2xl);
        color: var(--text-primary);
        font-size: 0.95rem;
        font-family: inherit;
        resize: none;
        outline: none;
        transition: all var(--transition-normal);
        line-height: 1.5;
      }

      .chat-input::placeholder {
        color: var(--text-muted);
      }

      .chat-input:focus {
        border-color: var(--border-accent);
        box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
        background: rgba(51, 65, 85, 0.8);
      }

      .input-actions {
        position: absolute;
        right: var(--space-3);
        bottom: var(--space-3);
        display: flex;
        gap: var(--space-2);
      }

      .input-action-btn {
        width: 32px;
        height: 32px;
        display: flex;
        align-items: center;
        justify-content: center;
        background: transparent;
        border: none;
        border-radius: var(--radius-lg);
        color: var(--text-muted);
        cursor: pointer;
        transition: all var(--transition-fast);
        font-size: 0.875rem;
      }

      .input-action-btn:hover {
        background: rgba(59, 130, 246, 0.1);
        color: var(--text-accent);
      }

      .send-button {
        width: var(--input-height);
        height: var(--input-height);
        background: var(--gradient-primary);
        border: none;
        border-radius: 50%;
        color: var(--text-primary);
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 1.1rem;
        transition: all var(--transition-normal);
        flex-shrink: 0;
        position: relative;
        overflow: hidden;
      }

      .send-button::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: linear-gradient(45deg, transparent, rgba(255, 255, 255, 0.2), transparent);
        transform: translateX(-100%);
        transition: transform var(--transition-slow);
      }

      .send-button:hover {
        transform: translateY(-2px);
        box-shadow: var(--shadow-glow);
      }

      .send-button:hover::before {
        transform: translateX(100%);
      }

      .send-button:active {
        transform: translateY(0);
      }

      .send-button:disabled {
          opacity: 0.5;
        cursor: not-allowed;
        transform: none;
      }

      .send-button:disabled:hover::before {
        transform: translateX(-100%);
      }

      /* Document Upload Area */
      .document-section {
        margin-bottom: var(--space-6);
      }

      .document-input-group {
        position: relative;
      }

      .document-input {
        width: 100%;
        padding: var(--space-4) var(--space-5);
        background: rgba(51, 65, 85, 0.5);
        border: 2px dashed var(--border-primary);
        border-radius: var(--radius-xl);
        color: var(--text-primary);
        font-size: 0.95rem;
        outline: none;
        transition: all var(--transition-normal);
      }

      .document-input::placeholder {
        color: var(--text-muted);
      }

      .document-input:focus {
        border-color: var(--border-accent);
        background: rgba(51, 65, 85, 0.8);
        box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
      }

      .document-actions {
        display: flex;
        gap: var(--space-3);
        margin-top: var(--space-3);
      }

      .sample-btn {
        padding: var(--space-2) var(--space-4);
        background: transparent;
        border: 1px solid var(--border-primary);
        border-radius: var(--radius-lg);
        color: var(--text-secondary);
        font-size: 0.875rem;
        cursor: pointer;
        transition: all var(--transition-normal);
        display: flex;
        align-items: center;
        gap: var(--space-2);
      }

      .sample-btn:hover {
        background: rgba(59, 130, 246, 0.1);
        border-color: var(--border-accent);
        color: var(--text-accent);
      }

      /* Loading States */
      .processing-overlay {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(15, 23, 42, 0.8);
        backdrop-filter: blur(5px);
        display: none;
        align-items: center;
        justify-content: center;
        z-index: 50;
      }

      .processing-overlay.show {
        display: flex;
      }

      .processing-content {
        text-align: center;
        padding: var(--space-8);
        background: var(--bg-secondary);
        border: 1px solid var(--border-primary);
        border-radius: var(--radius-2xl);
        box-shadow: var(--shadow-2xl);
      }

      .processing-spinner {
        width: 60px;
        height: 60px;
        margin: 0 auto var(--space-4);
        position: relative;
      }

      .processing-spinner::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        border: 3px solid var(--border-primary);
        border-top: 3px solid var(--text-accent);
        border-radius: 50%;
        animation: spin 1s linear infinite;
      }

      .processing-spinner::after {
        content: '';
        position: absolute;
        top: 6px;
        left: 6px;
        width: calc(100% - 12px);
        height: calc(100% - 12px);
        border: 2px solid transparent;
        border-top: 2px solid var(--text-accent);
        border-radius: 50%;
        animation: spin 1.5s linear infinite reverse;
        opacity: 0.6;
      }

      @keyframes spin {
        0% {
          transform: rotate(0deg);
        }
        100% {
          transform: rotate(360deg);
        }
      }

      .processing-text {
        color: var(--text-primary);
        font-size: 1.1rem;
        font-weight: 600;
        margin-bottom: var(--space-2);
      }

      .processing-desc {
        color: var(--text-secondary);
        font-size: 0.9rem;
        line-height: 1.5;
      }

      /* Sample Questions Styles */
      .sample-questions-container {
        padding: var(--space-6);
        background: rgba(30, 41, 59, 0.3);
        border: 1px solid var(--border-primary);
        border-radius: var(--radius-xl);
        margin: var(--space-4) 0;
        animation: messageSlideIn 0.4s ease-out;
      }

      .sample-questions-header {
        display: flex;
        align-items: center;
        gap: var(--space-2);
        margin-bottom: var(--space-4);
        color: var(--text-accent);
        font-weight: 600;
        font-size: 0.95rem;
      }

      .sample-questions-header i {
        font-size: 1.1rem;
      }

      .sample-question-btn {
        display: block;
        width: 100%;
        padding: var(--space-3) var(--space-4);
        margin-bottom: var(--space-2);
        background: rgba(59, 130, 246, 0.1);
        border: 1px solid var(--border-primary);
        border-radius: var(--radius-lg);
        color: var(--text-primary);
        font-size: 0.9rem;
        text-align: left;
        cursor: pointer;
        transition: all var(--transition-normal);
        line-height: 1.4;
      }

      .sample-question-btn:hover {
        background: rgba(59, 130, 246, 0.2);
        border-color: var(--border-accent);
        transform: translateY(-1px);
      }

      .sample-question-btn:last-child {
        margin-bottom: 0;
      }

      /* Notification System */
      .notification {
        position: fixed;
        top: var(--space-6);
        right: var(--space-6);
        max-width: 400px;
        padding: var(--space-4) var(--space-5);
        background: var(--bg-secondary);
        border: 1px solid var(--border-primary);
        border-radius: var(--radius-xl);
        box-shadow: var(--shadow-2xl);
        color: var(--text-primary);
        transform: translateX(100%);
        opacity: 0;
        transition: all var(--transition-normal);
        z-index: 100;
        pointer-events: none;
      }

      .notification.show {
        transform: translateX(0);
          opacity: 1;
        pointer-events: auto;
      }

      .notification-success {
        border-left: 4px solid var(--text-success);
      }

      .notification-error {
        border-left: 4px solid var(--text-error);
      }

      .notification-warning {
        border-left: 4px solid var(--text-warning);
      }

      .notification-info {
        border-left: 4px solid var(--text-accent);
      }

      .notification-header {
        display: flex;
        align-items: center;
        justify-content: space-between;
        margin-bottom: var(--space-2);
      }

      .notification-title {
        display: flex;
        align-items: center;
        gap: var(--space-2);
        font-weight: 600;
        font-size: 0.9rem;
      }

      .notification-close {
        background: none;
        border: none;
        color: var(--text-muted);
        cursor: pointer;
        padding: var(--space-1);
        border-radius: var(--radius-md);
        transition: all var(--transition-fast);
      }

      .notification-close:hover {
        background: rgba(255, 255, 255, 0.1);
        color: var(--text-primary);
      }

      .notification-message {
        font-size: 0.875rem;
        color: var(--text-secondary);
        line-height: 1.4;
      }

      /* Responsive Design */
      @media (max-width: 1024px) {
        :root {
          --sidebar-width: 250px;
          --space-6: 1rem;
          --space-8: 1.5rem;
        }

        .chat-container {
          border-left: none;
          border-right: none;
        }

        .welcome-features {
          grid-template-columns: 1fr;
        }
      }

      @media (max-width: 768px) {
        :root {
          --sidebar-width: 100%;
          --header-height: 70px;
          --space-6: 0.75rem;
        }

        .chat-container {
          flex-direction: column;
        }

        .sidebar {
          width: 100%;
          height: auto;
          border-right: none;
          border-bottom: 1px solid var(--border-primary);
          flex-direction: row;
          overflow-x: auto;
        }

        .logo-section {
          flex-shrink: 0;
          border-right: 1px solid var(--border-primary);
          border-bottom: none;
        }

        .status-section {
          flex-shrink: 0;
          border-right: 1px solid var(--border-primary);
          border-bottom: none;
        }

        .nav-menu {
          flex-direction: row;
          padding: var(--space-4);
          gap: var(--space-2);
        }

        .nav-item {
          white-space: nowrap;
          border-left: none;
          border-bottom: 3px solid transparent;
          padding: var(--space-2) var(--space-4);
        }

        .nav-item:hover,
        .nav-item.active {
          border-left: none;
          border-bottom-color: var(--border-accent);
        }

        .main-chat {
          height: calc(100vh - 120px);
        }

        .chat-messages {
          padding: var(--space-4);
        }

        .welcome-message {
          padding: var(--space-12) var(--space-4);
        }

        .welcome-title {
          font-size: 1.5rem;
        }

        .welcome-subtitle {
          font-size: 1rem;
        }

        .welcome-icon {
          font-size: 3rem;
        }

        .message-bubble {
          max-width: 85%;
        }

        .chat-input-container {
          padding: var(--space-4);
        }

        .notification {
          top: var(--space-4);
          right: var(--space-4);
          left: var(--space-4);
          max-width: none;
        }
      }

      @media (max-width: 480px) {
        :root {
          --space-4: 0.75rem;
          --space-6: 1rem;
          --input-height: 50px;
        }

        .logo {
          font-size: 1.25rem;
        }

        .logo-icon {
          font-size: 1.5rem;
        }

        .chat-title h1 {
          font-size: 1.1rem;
        }

        .welcome-title {
          font-size: 1.25rem;
        }

        .welcome-icon {
          font-size: 2.5rem;
        }

        .message-bubble {
          max-width: 90%;
          padding: var(--space-3) var(--space-4);
          font-size: 0.9rem;
        }

        .chat-input {
          min-height: 50px;
          padding: var(--space-3) var(--space-4);
          padding-right: var(--space-10);
          font-size: 0.9rem;
        }

        .send-button {
          width: 50px;
          height: 50px;
        }

        .input-actions {
          right: var(--space-2);
          bottom: var(--space-2);
        }

        .document-input {
          padding: var(--space-3) var(--space-4);
          font-size: 0.9rem;
        }
      }

      /* Accessibility Enhancements */
      @media (prefers-reduced-motion: reduce) {
        *,
        *::before,
        *::after {
          animation-duration: 0.01ms !important;
          animation-iteration-count: 1 !important;
          transition-duration: 0.01ms !important;
        }

        .typing-dot {
          animation: none;
        }

        .processing-spinner::before,
        .processing-spinner::after {
          animation: none;
        }
      }

      @media (prefers-contrast: high) {
        :root {
          --border-primary: #64748b;
          --border-secondary: #94a3b8;
          --bg-input: #1e293b;
        }

        .message-bubble {
          border: 2px solid var(--border-primary);
        }

        .chat-input {
          border-width: 2px;
        }

        .btn-primary {
          border: 2px solid var(--border-accent);
        }
      }

      /* Focus Styles for Accessibility */
      .action-btn:focus,
      .nav-item:focus,
      .sample-btn:focus,
      .send-button:focus,
      .input-action-btn:focus {
        outline: 2px solid var(--text-accent);
        outline-offset: 2px;
      }

      .chat-input:focus,
      .document-input:focus {
        outline: 2px solid var(--text-accent);
        outline-offset: 2px;
      }

      /* Screen Reader Only */
      .sr-only {
        position: absolute;
        width: 1px;
        height: 1px;
        padding: 0;
        margin: -1px;
        overflow: hidden;
        clip: rect(0, 0, 0, 0);
        white-space: nowrap;
        border: 0;
      }

      /* Print Styles */
      @media print {
        .sidebar,
        .chat-header,
        .chat-input-container,
        .processing-overlay,
        .notification {
          display: none !important;
        }

        .main-chat {
          width: 100%;
        }

        .chat-messages {
          padding: 0;
        }

        .message-bubble {
          break-inside: avoid;
          box-shadow: none;
          border: 1px solid #000;
        }
      }

      /* Hover Effects for Desktop */
      @media (hover: hover) {
        .nav-item:hover {
          background: rgba(59, 130, 246, 0.1);
        }

        .message-bubble:hover {
          transform: translateY(-1px);
        }

        .welcome-feature:hover {
          transform: translateY(-2px);
        }
      }

      /* Dark Mode Overrides (for systems that prefer dark) */
      @media (prefers-color-scheme: dark) {
        :root {
          --bg-primary: #020617;
          --bg-secondary: #0f172a;
          --bg-tertiary: #1e293b;
        }
      }
    </style>
  </head>
  <body>
    <div class="chat-container">
      <!-- Sidebar -->
      <aside class="sidebar">
        <!-- Logo Section -->
        <div class="logo-section">
          <a href="#" class="logo">
            <i class="fas fa-robot logo-icon"></i>
            <span class="logo-text">HackRX AI</span>
          </a>
        </div>

        <!-- Status Section -->
        <div class="status-section">
          <div class="status-indicator">
            <div class="status-dot" id="status-dot"></div>
            <span id="status-text">Connecting...</span>
        </div>
      </div>

        <!-- Navigation Menu -->
        <nav class="nav-menu">
          <a href="#" class="nav-item active" data-tab="chat">
            <i class="fas fa-comments"></i>
            <span>AI Chat</span>
          </a>
          <a href="#" class="nav-item" data-tab="history">
            <i class="fas fa-history"></i>
            <span>Chat History</span>
          </a>
          <a href="#" class="nav-item" data-tab="settings">
            <i class="fas fa-cog"></i>
            <span>Settings</span>
          </a>
          <a href="http://localhost:8000" class="nav-item" target="_blank" rel="noopener">
            <i class="fas fa-book"></i>
            <span>API Docs</span>
          </a>
          <a href="http://localhost:8000/help" class="nav-item" target="_blank" rel="noopener">
            <i class="fas fa-question-circle"></i>
            <span>Help</span>
          </a>
        </nav>
      </aside>

      <!-- Main Chat Area -->
      <main class="main-chat">
        <!-- Chat Header -->
        <header class="chat-header">
          <div class="chat-title">
            <div>
              <h1>AI Document Assistant</h1>
              <div class="chat-subtitle">V2 Enhanced Processing â€¢ RAG Technology</div>
            </div>
          </div>
          <div class="chat-actions">
            <button class="action-btn" id="export-chat-btn" title="Export Chat">
              <i class="fas fa-download"></i>
            </button>
            <button class="action-btn" id="clear-chat-btn" title="Clear Chat">
              <i class="fas fa-trash-alt"></i>
            </button>
            <button class="action-btn" id="settings-btn" title="Settings">
              <i class="fas fa-cog"></i>
                  </button>
                </div>
        </header>

        <!-- Chat Messages -->
        <div class="chat-messages" id="chat-messages">
          <!-- Welcome Message -->
          <div class="welcome-message" id="welcome-message">
            <div class="welcome-icon">
              <i class="fas fa-robot"></i>
              </div>
            <h2 class="welcome-title">Welcome to HackRX AI</h2>
            <p class="welcome-subtitle">
              Your intelligent document analysis assistant powered by advanced RAG technology. 
              Upload a document and start asking questions to get precise, context-aware answers.
            </p>
            <div class="welcome-features">
              <div class="welcome-feature">
                <div class="welcome-feature-icon">
                  <i class="fas fa-brain"></i>
                </div>
                <div class="welcome-feature-title">AI-Powered Analysis</div>
                <div class="welcome-feature-desc">Advanced NLP models provide accurate document insights</div>
              </div>
              <div class="welcome-feature">
                <div class="welcome-feature-icon">
                  <i class="fas fa-file-alt"></i>
                </div>
                <div class="welcome-feature-title">Multi-Format Support</div>
                <div class="welcome-feature-desc">PDF, DOC, TXT and more document formats supported</div>
              </div>
              <div class="welcome-feature">
                <div class="welcome-feature-icon">
                  <i class="fas fa-bolt"></i>
                </div>
                <div class="welcome-feature-title">Real-Time Processing</div>
                <div class="welcome-feature-desc">Get instant responses with enhanced V2 API</div>
              </div>
            </div>
            </div>

          <!-- Typing Indicator (Hidden by default) -->
          <div class="typing-indicator" id="typing-indicator" style="display: none;">
            <div class="typing-dots">
              <div class="typing-dot"></div>
              <div class="typing-dot"></div>
              <div class="typing-dot"></div>
            </div>
            <span class="typing-text">AI is thinking...</span>
          </div>
        </div>

        <!-- Chat Input -->
        <div class="chat-input-container">
          <!-- Document Upload Section -->
          <div class="document-section" id="document-section">
            <div class="document-input-group">
            <input
                type="url" 
                id="document-input" 
                class="document-input" 
                placeholder="ðŸ“Ž Paste document URL here (PDF, DOC, TXT)..."
                aria-label="Document URL"
            />
          </div>
            <div class="document-actions">
              <button type="button" class="sample-btn" id="load-sample-btn">
                <i class="fas fa-clipboard"></i>
                Load Sample Policy
              </button>
              <button type="button" class="sample-btn" id="clear-doc-btn">
                <i class="fas fa-times"></i>
                Clear
              </button>
            </div>
          </div>

          <!-- Chat Input Form -->
          <form class="chat-input-form" id="chat-form">
            <div class="input-group">
              <textarea 
                id="message-input" 
                class="chat-input" 
                placeholder="Ask me anything about your document..."
                rows="1"
                aria-label="Message input"
                maxlength="2000"
              ></textarea>
              <div class="input-actions">
                <button type="button" class="input-action-btn" id="emoji-btn" title="Emoji">
                  <i class="fas fa-smile"></i>
                </button>
                <button type="button" class="input-action-btn" id="attach-btn" title="Attach">
                  <i class="fas fa-paperclip"></i>
                </button>
              </div>
            </div>
            <button type="submit" class="send-button" id="send-btn" disabled>
              <i class="fas fa-paper-plane"></i>
              <span class="sr-only">Send message</span>
            </button>
          </form>
        </div>
      </main>
          </div>

    <!-- Processing Overlay -->
    <div class="processing-overlay" id="processing-overlay">
      <div class="processing-content">
        <div class="processing-spinner"></div>
        <div class="processing-text">Processing Document</div>
        <div class="processing-desc">
          Analyzing your document with AI...<br>
          This may take a few moments.
          </div>
        </div>
      </div>

    <!-- Notification Container -->
    <div id="notification-container"></div>

    <!-- About Modal (Hidden by default) -->
    <div id="about-modal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0, 0, 0, 0.8); z-index: 1000; backdrop-filter: blur(5px);">
      <div style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); background: var(--glass-bg); backdrop-filter: var(--glass-backdrop); border: 1px solid var(--glass-border); border-radius: var(--border-radius-3xl); padding: var(--space-8); max-width: 500px; width: 90%;">
        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: var(--space-6);">
          <h2 style="color: var(--white); margin: 0;">About HackRX</h2>
          <button onclick="hideAbout()" style="background: none; border: none; color: var(--white); font-size: 1.5rem; cursor: pointer;">
            <i class="fas fa-times"></i>
          </button>
        </div>
        <div style="color: rgba(255, 255, 255, 0.9); line-height: 1.6;">
          <p style="margin-bottom: var(--space-4);">
            HackRX is an advanced AI-powered document processing platform that leverages cutting-edge Retrieval-Augmented Generation (RAG) technology to provide intelligent insights from your documents.
          </p>
          <p style="margin-bottom: var(--space-4);">
            <strong>Key Features:</strong>
          </p>
          <ul style="margin-left: var(--space-4); margin-bottom: var(--space-4);">
            <li>Multi-format document support (PDF, DOC, TXT)</li>
            <li>Advanced natural language processing</li>
            <li>Context-aware question answering</li>
            <li>Real-time processing and responses</li>
            <li>Modern, accessible user interface</li>
          </ul>
          <p style="font-size: 0.9rem; color: rgba(255, 255, 255, 0.7);">
            Version 2.0 | Built with modern web technologies
          </p>
        </div>
      </div>
    </div>

    <script>
      // Modern Chatbot Application - V2 API Only
      class HackRXChatbot {
        constructor() {
          this.apiBaseUrl = 'http://localhost:8000';
          this.apiVersion = 'v2'; // Fixed to V2 only
          this.currentDocument = null;
          this.chatHistory = [];
          this.isProcessing = false;
          this.isConnected = false;
          
          // DOM Elements
          this.elements = {
            statusDot: document.getElementById('status-dot'),
            statusText: document.getElementById('status-text'),
            chatMessages: document.getElementById('chat-messages'),
            welcomeMessage: document.getElementById('welcome-message'),
            typingIndicator: document.getElementById('typing-indicator'),
            documentInput: document.getElementById('document-input'),
            messageInput: document.getElementById('message-input'),
            sendBtn: document.getElementById('send-btn'),
            chatForm: document.getElementById('chat-form'),
            loadSampleBtn: document.getElementById('load-sample-btn'),
            clearDocBtn: document.getElementById('clear-doc-btn'),
            processingOverlay: document.getElementById('processing-overlay'),
            notificationContainer: document.getElementById('notification-container')
          };

          this.init();
        }

        init() {
          this.setupEventListeners();
          this.checkApiStatus();
          this.loadChatHistory();
          this.setupAutoResize();
          
          // Check API status every 30 seconds
          setInterval(() => this.checkApiStatus(), 30000);
          
          console.log('ðŸ¤– HackRX AI Chatbot initialized successfully!');
        }

        setupEventListeners() {
          // Chat form submission
          this.elements.chatForm.addEventListener('submit', (e) => this.handleChatSubmit(e));
          
          // Message input events
          this.elements.messageInput.addEventListener('input', () => this.handleInputChange());
          this.elements.messageInput.addEventListener('keydown', (e) => this.handleKeyDown(e));
          
          // Document input events
          this.elements.documentInput.addEventListener('input', () => this.handleDocumentChange());
          this.elements.documentInput.addEventListener('paste', (e) => this.handleDocumentPaste(e));
          
          // Button events
          this.elements.loadSampleBtn.addEventListener('click', () => this.loadSampleDocument());
          this.elements.clearDocBtn.addEventListener('click', () => this.clearDocument());
          
          // Action buttons
          document.getElementById('export-chat-btn').addEventListener('click', () => this.exportChat());
          document.getElementById('clear-chat-btn').addEventListener('click', () => this.clearChat());
          
          // Navigation
          document.querySelectorAll('.nav-item[data-tab]').forEach(item => {
            item.addEventListener('click', (e) => this.handleNavigation(e));
          });
        }

        setupAutoResize() {
          const textarea = this.elements.messageInput;
          textarea.addEventListener('input', () => {
            textarea.style.height = 'auto';
            textarea.style.height = Math.min(textarea.scrollHeight, 120) + 'px';
          });
        }

        async checkApiStatus() {
          try {
            const response = await fetch(`${this.apiBaseUrl}/api/v2/`, {
              method: 'GET',
              mode: 'cors',
              credentials: 'omit'
            });

          if (response.ok) {
              this.updateStatus('online', 'Connected to V2 API');
              this.isConnected = true;
          } else {
              throw new Error(`HTTP ${response.status}`);
          }
        } catch (error) {
            this.updateStatus('offline', 'Connection failed');
            this.isConnected = false;
          }
        }

        updateStatus(status, message) {
          this.elements.statusDot.className = `status-dot ${status}`;
          this.elements.statusText.textContent = message;
        }

        handleInputChange() {
          const hasText = this.elements.messageInput.value.trim().length > 0;
          const hasDocument = this.currentDocument !== null;
          const canSend = hasText && hasDocument && !this.isProcessing;
          
          this.elements.sendBtn.disabled = !canSend;
          
          // Visual feedback
          if (canSend) {
            this.elements.sendBtn.style.opacity = '1';
            this.elements.sendBtn.style.transform = 'scale(1)';
          } else {
            this.elements.sendBtn.style.opacity = '0.5';
            this.elements.sendBtn.style.transform = 'scale(0.95)';
          }
        }

        handleKeyDown(e) {
          if (e.key === 'Enter' && !e.shiftKey) {
            e.preventDefault();
            if (!this.elements.sendBtn.disabled) {
              this.handleChatSubmit(e);
            }
          }
        }

        handleDocumentChange() {
          const url = this.elements.documentInput.value.trim();
          if (url) {
            this.setDocument(url);
          } else {
            this.clearDocument();
          }
        }

        handleDocumentPaste(e) {
          setTimeout(() => {
            const url = this.elements.documentInput.value.trim();
            if (url) {
              this.setDocument(url);
              this.showNotification('success', 'Document URL detected!', 'Ready to analyze your document.');
            }
          }, 100);
        }

        setDocument(url) {
          try {
            new URL(url); // Validate URL
            this.currentDocument = url;
            this.elements.documentInput.style.borderColor = 'var(--text-success)';
            this.elements.documentInput.style.background = 'rgba(16, 185, 129, 0.1)';
            this.handleInputChange();
            
            if (this.elements.welcomeMessage.style.display !== 'none') {
              this.hideWelcomeMessage();
            }
            
            console.log('Document set:', url);
        } catch (error) {
            this.currentDocument = null;
            this.elements.documentInput.style.borderColor = 'var(--text-error)';
            this.elements.documentInput.style.background = 'rgba(239, 68, 68, 0.1)';
            this.handleInputChange();
            console.log('Invalid document URL:', url);
          }
        }

        clearDocument() {
          this.currentDocument = null;
          this.elements.documentInput.value = '';
          this.elements.documentInput.style.borderColor = '';
          this.elements.documentInput.style.background = '';
          
          // Clear sample questions if they exist
          const sampleQuestions = this.elements.chatMessages.querySelector('.sample-questions-container');
          if (sampleQuestions) {
            sampleQuestions.remove();
          }
          
          // Show welcome message again if no chat history
          const messageGroups = this.elements.chatMessages.querySelectorAll('.message-group');
          if (messageGroups.length === 0) {
            this.elements.welcomeMessage.style.display = 'flex';
          }
          
          this.handleInputChange();
          this.showNotification('info', 'Document Cleared', 'Document has been removed. Please add a new document to continue.');
        }

        loadSampleDocument() {
          const sampleUrl = 'https://hackrx.blob.core.windows.net/assets/policy.pdf?sv=2023-01-03&st=2025-07-04T09%3A11%3A24Z&se=2027-07-05T09%3A11%3A00Z&sr=b&sp=r&sig=N4a9OU0w0QXO6AOIBiu4bpl7AXvEZogeT%2FjUHNO7HzQ%3D';
          this.elements.documentInput.value = sampleUrl;
          this.setDocument(sampleUrl);
          
          // Add sample questions to the chat
          const sampleQuestions = [
            'What is the grace period for premium payment under the National Parivar Mediclaim Plus Policy?',
            'What is the waiting period for pre-existing diseases (PED) to be covered?',
            'Does this policy cover maternity expenses, and what are the conditions?'
          ];
          
          // Clear existing messages and show sample questions
          this.hideWelcomeMessage();
          
          // Add sample questions as suggestions
          setTimeout(() => {
            this.addSampleQuestions(sampleQuestions);
          }, 500);
          
          this.showNotification('success', 'Sample document loaded!', 'National Parivar Mediclaim Plus Policy is ready for analysis with sample questions.');
        }

        addSampleQuestions(questions) {
          const questionsContainer = document.createElement('div');
          questionsContainer.className = 'sample-questions-container';
          questionsContainer.innerHTML = `
            <div class="sample-questions-header">
              <i class="fas fa-lightbulb"></i>
              <span>Try asking these sample questions:</span>
            </div>
          `;

          questions.forEach((question, index) => {
            const questionBtn = document.createElement('button');
            questionBtn.className = 'sample-question-btn';
            questionBtn.textContent = `${index + 1}. ${question}`;
            questionBtn.addEventListener('click', () => {
              this.elements.messageInput.value = question;
              this.handleInputChange();
              questionsContainer.remove();
            });
            questionsContainer.appendChild(questionBtn);
          });

          this.elements.chatMessages.appendChild(questionsContainer);
          this.scrollToBottom();
        }

        async handleChatSubmit(e) {
          e.preventDefault();
          
          console.log('Chat submit triggered');
          console.log('Is processing:', this.isProcessing);
          console.log('Current document:', this.currentDocument);
          
          if (this.isProcessing) {
            console.log('Already processing, ignoring submit');
            return;
          }
          
          if (!this.currentDocument) {
            console.log('No document set, ignoring submit');
            this.showNotification('warning', 'No Document', 'Please add a document URL first.');
            return;
          }
          
          const message = this.elements.messageInput.value.trim();
          console.log('Message:', message);
          
          if (!message) {
            console.log('Empty message, ignoring submit');
            return;
          }

          // Add user message to chat
          this.addMessage('user', message);
          
          // Clear input and show typing
          this.elements.messageInput.value = '';
          this.elements.messageInput.style.height = 'auto';
          this.handleInputChange();
          this.showTyping();
          
          try {
            this.isProcessing = true;
            this.elements.processingOverlay.classList.add('show');
            
            const response = await this.processWithAI(this.currentDocument, [message]);
            
            if (response.success) {
              const answer = response.data.answers[0] || 'No answer provided';
              this.addMessage('bot', answer, response.data.metadata);
              
              // Save to history
              this.chatHistory.push({
                timestamp: new Date().toISOString(),
                document: this.currentDocument,
                question: message,
                answer: answer,
                metadata: response.data.metadata
              });
              this.saveChatHistory();
              
            } else {
              this.addMessage('bot', `Sorry, I encountered an error: ${response.error}`);
            }
            
          } catch (error) {
            this.addMessage('bot', `Sorry, I encountered an error: ${error.message}`);
            this.showNotification('error', 'Processing Error', error.message);
          } finally {
            this.hideTyping();
            this.isProcessing = false;
            this.elements.processingOverlay.classList.remove('show');
            this.handleInputChange();
          }
        }

        async processWithAI(documentUrl, questions) {
          try {
            const response = await fetch(`${this.apiBaseUrl}/api/v2/hackrx/run`, {
              method: 'POST',
              headers: {
                'Content-Type': 'application/json'
              },
              body: JSON.stringify({
                documents: documentUrl,
                questions: questions,
                options: {
                  enable_batch_processing: false,
                  max_tokens: 2000,
                  temperature: 0.1
                }
              })
            });

            if (!response.ok) {
              const errorData = await response.json().catch(() => ({}));
              throw new Error(errorData.detail || `HTTP ${response.status}: ${response.statusText}`);
            }

            const data = await response.json();
            return { success: true, data };
            
          } catch (error) {
            return { success: false, error: error.message };
          }
        }

        addMessage(type, content, metadata = null) {
          this.hideWelcomeMessage();
          
          const messageGroup = document.createElement('div');
          messageGroup.className = 'message-group';
          
          const messageBubble = document.createElement('div');
          messageBubble.className = `message-bubble message-${type}`;
          messageBubble.textContent = content;
          
          const messageMeta = document.createElement('div');
          messageMeta.className = 'message-meta';
          
          const timeSpan = document.createElement('span');
          timeSpan.className = 'message-time';
          timeSpan.textContent = new Date().toLocaleTimeString();
          messageMeta.appendChild(timeSpan);
          
          if (type === 'bot' && metadata) {
            const metaSpan = document.createElement('span');
            metaSpan.textContent = `V2 Enhanced â€¢ ${metadata.processing_time || 'N/A'}s`;
            messageMeta.appendChild(metaSpan);
          }
          
          messageGroup.appendChild(messageBubble);
          messageGroup.appendChild(messageMeta);
          
          this.elements.chatMessages.appendChild(messageGroup);
          this.scrollToBottom();
        }

        showTyping() {
          this.elements.typingIndicator.style.display = 'flex';
          this.scrollToBottom();
        }

        hideTyping() {
          this.elements.typingIndicator.style.display = 'none';
        }

        hideWelcomeMessage() {
          if (this.elements.welcomeMessage) {
            this.elements.welcomeMessage.style.display = 'none';
          }
        }

        scrollToBottom() {
        setTimeout(() => {
            this.elements.chatMessages.scrollTop = this.elements.chatMessages.scrollHeight;
          }, 100);
        }

        showNotification(type, title, message) {
          const notification = document.createElement('div');
          notification.className = `notification notification-${type}`;
          
          notification.innerHTML = `
            <div class="notification-header">
              <div class="notification-title">
                <i class="fas fa-${this.getNotificationIcon(type)}"></i>
                <span>${title}</span>
              </div>
              <button class="notification-close">
                <i class="fas fa-times"></i>
              </button>
            </div>
            <div class="notification-message">${message}</div>
          `;
          
          const closeBtn = notification.querySelector('.notification-close');
          closeBtn.addEventListener('click', () => {
            notification.classList.remove('show');
            setTimeout(() => notification.remove(), 300);
          });
          
          this.elements.notificationContainer.appendChild(notification);
          
          // Show notification
          setTimeout(() => notification.classList.add('show'), 100);
          
          // Auto-hide after 5 seconds
        setTimeout(() => {
            if (notification.classList.contains('show')) {
              notification.classList.remove('show');
              setTimeout(() => notification.remove(), 300);
            }
          }, 5000);
        }

        getNotificationIcon(type) {
          const icons = {
            success: 'check-circle',
            error: 'exclamation-circle',
            warning: 'exclamation-triangle',
            info: 'info-circle'
          };
          return icons[type] || 'info-circle';
        }

        exportChat() {
          if (this.chatHistory.length === 0) {
            this.showNotification('warning', 'No Chat History', 'No conversations to export.');
          return;
        }

        const exportData = {
            platform: 'HackRX AI Chatbot',
            version: '2.0',
            api_version: 'v2',
            exported_at: new Date().toISOString(),
            total_conversations: this.chatHistory.length,
            conversations: this.chatHistory
        };

        const blob = new Blob([JSON.stringify(exportData, null, 2)], {
            type: 'application/json'
        });

        const url = URL.createObjectURL(blob);
          const a = document.createElement('a');
        a.href = url;
          a.download = `hackrx-chat-${Date.now()}.json`;
          a.style.display = 'none';
          
        document.body.appendChild(a);
        a.click();
        document.body.removeChild(a);
        URL.revokeObjectURL(url);

          this.showNotification('success', 'Chat Exported', 'Your chat history has been saved.');
        }

        clearChat() {
          if (this.chatHistory.length === 0 && this.elements.chatMessages.children.length <= 2) {
            this.showNotification('info', 'Nothing to Clear', 'Chat is already empty.');
            return;
          }

          if (confirm('Are you sure you want to clear all chat messages and history?')) {
            // Clear DOM messages (except welcome and typing indicator)
            const messages = this.elements.chatMessages.querySelectorAll('.message-group');
            messages.forEach(msg => msg.remove());
            
            // Clear history
            this.chatHistory = [];
            this.saveChatHistory();
            
            // Show welcome message again
            if (this.elements.welcomeMessage) {
              this.elements.welcomeMessage.style.display = 'flex';
            }
            
            this.showNotification('success', 'Chat Cleared', 'All messages and history have been cleared.');
          }
        }

        handleNavigation(e) {
          e.preventDefault();
          const tab = e.currentTarget.dataset.tab;
          
          // Update active nav item
          document.querySelectorAll('.nav-item').forEach(item => item.classList.remove('active'));
          e.currentTarget.classList.add('active');
          
          switch (tab) {
            case 'chat':
              // Already on chat - do nothing
              break;
            case 'history':
              this.showChatHistory();
              break;
            case 'settings':
              this.showSettings();
              break;
          }
        }

        showChatHistory() {
          if (this.chatHistory.length === 0) {
            this.showNotification('info', 'No History', 'No chat history available.');
            return;
          }

          // Create history modal (simplified for this demo)
          const historyText = this.chatHistory.map(item => 
            `${new Date(item.timestamp).toLocaleString()}: ${item.question} -> ${item.answer.substring(0, 100)}...`
          ).join('\n\n');
          
          alert(`Chat History (${this.chatHistory.length} conversations):\n\n${historyText}`);
        }

        showSettings() {
          const settings = {
            'API Base URL': this.apiBaseUrl,
            'API Version': this.apiVersion,
            'Current Document': this.currentDocument || 'None',
            'Connection Status': this.isConnected ? 'Connected' : 'Disconnected',
            'Chat History Count': this.chatHistory.length
          };
          
          const settingsText = Object.entries(settings)
            .map(([key, value]) => `${key}: ${value}`)
            .join('\n');
          
          alert(`Settings:\n\n${settingsText}`);
        }

        loadChatHistory() {
          try {
            const saved = localStorage.getItem('hackrx-chat-history');
        if (saved) {
              this.chatHistory = JSON.parse(saved);
            }
          } catch (error) {
            console.warn('Failed to load chat history:', error);
            this.chatHistory = [];
          }
        }

        saveChatHistory() {
          try {
            localStorage.setItem('hackrx-chat-history', JSON.stringify(this.chatHistory));
          } catch (error) {
            console.warn('Failed to save chat history:', error);
          }
        }
      }

      // Initialize the chatbot when DOM is ready
      if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', () => {
          window.hackrxChatbot = new HackRXChatbot();
        });
      } else {
        window.hackrxChatbot = new HackRXChatbot();
      }

      // Global error handling
      window.addEventListener('error', (event) => {
        console.error('Global error:', event.error);
        if (window.hackrxChatbot) {
          window.hackrxChatbot.showNotification('error', 'Application Error', 'An unexpected error occurred.');
        }
      });

      window.addEventListener('unhandledrejection', (event) => {
        console.error('Unhandled promise rejection:', event.reason);
        if (window.hackrxChatbot) {
          window.hackrxChatbot.showNotification('error', 'Network Error', 'A network error occurred.');
        }
      });

      console.log('ðŸš€ HackRX AI Chatbot v2.0 loaded successfully!');
    </script>
  </body>
</html>